language: java
dist: trusty

before_install:
  - rm -rf $HOME/.m2/repository/io/vlingo
  - cp .travis/settings.xml $HOME/.m2/settings.xml

script:
  - mvn install

before_cache:
  - rm -rf $HOME/.m2/repository/io/vlingo
cache:
  directories:
    - $HOME/.m2/repository

deploy:
  - provider: script
    script: "mvn deploy -DskipTests"
    skip_cleanup: true
    on:
      tags: true
  - provider: script
    script: "mvn deploy -DskipTests"
    skip_cleanup: true
    on:
      branch: master

notifications:
  slack:
    secure: aT/B5sKQn90LVJPQVmR++YfdJ+t4s1mm1A6SMdSaG8hBCPYLv93Cj7OWUASm6l3DbcjighFoGgsYNFxZ7/CCjL0hF0pTpWN8l8p/Dzadx/OZRYagjladbyLqUV3TYj/s7oB8et398Csxa5jN31rFdAjjNC88+UbAml2bU4gGbE8loi4ceZQfG0fUbIGtSc2S21ADAHKSkvXSk8MZzviUF7l6pj4XqF7tbE0T+iieXDPtQWpA2cVtnIQeoe5p/M2CJQqfrFkTXLGLzDcx6bzxZ0+Yh8r8QMDKwHNhdYv9B5mnlpzOdNmsdzKcWYT+Y8tekRhepNmqQFkww3RwBEneesZquaQQME734lmC1EUrcKqcz9B83Zdf5s4fwyL2nAbxSzocp689QLmJzyIeJFpG0AAHS5t634UTSGuwya77UUW9HEuSYkRDJbRmb/LtZR6zozbX9O9h+SxDrN59ZZqwwsZeYKr1SdsEiN/OjcbjmHZckkUCHyRJM6vIrMYwnjf0aIlrLIh+j3yYBHl6Y5lvbngootgFPXzbxmTwbYDd0yF8EsBCoeaacPYbldYdGjvkjk091kAGKlnYTuUE8m16HnETaxWpSN6FkadQODzPvmgL7KFtnt7NB/A4efKCCorhE4pDo/K62Vw8poUyo1OWJyX8LbTHSh8/kCASwvOxQoo=
